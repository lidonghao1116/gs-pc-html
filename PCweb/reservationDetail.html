<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/head-foot.css" rel="stylesheet" type="text/css" />
<link href="css/reservationDetail.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.11.3.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/top.js"></script>
<script type="text/javascript" src="js/myReservation.js"></script>
<title>预约详情</title>
</head>
<body>
	<!--头部-->
	<div class="head_box">
		<div class="head">
			<div class="left logo">
				<a href="index.html" target="_self">
					<img src="img/logo0.png"/>
				</a>
			</div>
			<div class="left more_s">
				<select>
					<option>更多导航</option>
					<option>更多导航0</option>
					<option>更多导航1哈</option>
				</select>
			</div>
			<div class="right head_r">
				<ul> 
					<li><a href="login.html" target="_self">登录</a></li>
					<li><a href="myOrder.html" target="_self">我的订单</a></li>
					<li><a href="myProfile.html" target="_self">我的账户</a></li>
					<li class="wechat"><a href="#">官网微信</a>
						<div class="wechat_b">
						</div>
					</li>
				</ul>
				<div class="my_res">
					<span><a href="myReservation.html" target="_self">我的预约>></a></span>
				</div>
			</div>
		</div>
	</div>
	<!--主要内容-->
	<div class="content_b">
		<div class="content_nav">
			<p>个人中心</p>
			<ul>
				<li>
					<a class="activesp" href="myReservation.html" target="_self">我的预约</a>
				</li>
				<li><a href="myOrder.html" target="_self">我的订单</a></li>
				<li><a href="myProfile.html" target="_self">我的资料</a></li>
			</ul>
		</div>
	</div>
	<div class="main_content info_detail">
		<div class="order">
			<h2 class="title_h2 title_sp">订单信息</h2>
			<span class="status" id="status"></span>
			<p class="order_p" >预约编号<span id="orderNo"></span></p>
			<p class="order_p" >提交时间<span id="time"></span></p>
		</div>
		<div class="service_info">
			<h2 class="title_h2 title_sp">服务信息</h2>
			<table class="service_table" cellspacing="0" cellpadding="0">
				<tr>
					<td class="odd">客户姓名</td>
					<td class="even" id="name"></td>
					<td class="odd">联系方式</td>
					<td class="even" id="telphone"></td>
				</tr>
				<tr>
					<td class="odd">服务工种</td>
					<td class="even" id="serName"></td>
					<td class="odd">服务时间</td>
					<td class="even" id="serTime"></td>
				</tr>
				<tr>
					<td class="odd">服务类型</td>
					<td class="even" id="serType"></td>
					<td class="odd">饲养宠物</td>
					<td class="even" id="animal"></td>
				</tr>
				<tr>
					<td class="odd">薪酬范围</td>
					<td class="even" id="salary"></td>
					<td class="odd">年龄要求</td>
					<td class="even" id="age"></td>
				</tr>
				<tr>
					<td class="odd">服务地址</td>
					<td colspan="3" id="address">室</td>
				</tr>
				<tr>
					<td class="odd">服务内容</td>
					<td colspan="3">
						<ul class="table_ul" id="content">
						</ul>
					</td>
				</tr>
				<tr>
					<td class="odd">备注</td>
					<td colspan="3" id="remark"></td>
				</tr>
			</table>
		</div>
		<div class="perinfo">
			<h2 class="title_h2 title_sp">家政员信息</h2>
			<div class="card">
			</div>
			
		</div>
	</div>
	<!-- 阿姨详情弹窗 -->
	<div class="mask0"></div>
	<div class="card_detail">
		<div class="list_box">
			<h1 class="title_h1">基本信息</h1>
			<div class="basic">
				
			</div>
		</div>
		<div class="list_box">
			<h1 class="title_h1">证件信息</h1>
			<ul class="paper">
				
			</ul>
		</div>
		<div class="list_box">
			<h1 class="title_h1">服务信息</h1>
			<div class="fuwu">
				<div class="fuwu_list">
					<div class="fuwu_l">服务类型：</div>
					<div class="fuwu_r">
						<p class="fuwu_p"></p>
					</div>
				</div>
				<div class="fuwu_list">
					<div class="fuwu_l">技能特点：</div>
					<div class="fuwu_r">
						<ul id="skills">
							
						</ul>
					</div>
				</div>
				<div class="fuwu_list">
					<div class="fuwu_l">烹饪特点：</div>
					<div class="fuwu_r">
						<ul id="cooking">
							
						</ul>
					</div>
				</div>
				<div class="fuwu_list">
					<div class="fuwu_l">语言特点：</div>
					<div class="fuwu_r">
						<ul id="language">
							
						</ul>
					</div>
				</div>
				<div class="fuwu_list">
					<div class="fuwu_l">性格特点：</div>
					<div class="fuwu_r">
						<ul id=character>
							
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="list_box">
			<h1 class="title_h1">工作经历</h1>
			<p class="p_text" id="workExperience"></p>
		</div>
		<div class="list_box">
			<h1 class="title_h1">自我评价</h1>
			<p class="p_text" id="myself"></p>
		</div>
		<div class="list_box list_box_last">
			<h1 class="title_h1">老师评价</h1>
			<p class="p_text" id="teacher"></p>
		</div>
		<div class="close"><img src="img/alertclose.png"/></div>
	</div>
	<!--底部-->
	<div class="foot_box">
		<div class="foot">Copyright@2016上海家策教育科技有限公司<span>沪IPC备12345678号</span></div>
	</div>
	<div class="bottom_fixed">
		<img class="top_img" src="img/qqren.png"/>
		<div class="link_phone">
			<p>服务热线</p>
			<p>021-6666&nbsp;&nbsp;8888</p>
		</div>
		<div class="qq_link">
			<p>QQ交谈</p>
			<p>QQ交谈</p>
			<p>QQ交谈</p>
		</div>
		<div class="lin_wechat">
		</div>
		<div id="goTopBtn" class="back_top">返回顶部</div>
	</div>
</body>
<script type="text/javascript">
$(function(){
		var url = location.search;
		if (url.indexOf("?") != -1) {
			str = url.substr(1),
			orderNo = str.split("=")[1];
			reservationDetail(orderNo);
		};
		function reservationDetail(orderNo){
			$.ajax({
			url: publicPath+"/api/reserveorders/reserveordersdeails",
			type: "post",
			data: {orderNo: orderNo},
			dataType: "json",
			success: function success(data) {
				if(data.success) {
					if(data.code==0){
						var dataJD=data.jsonData;
						$("#status").html(dataJD.ordersmap.orderStatus);
						$("#orderNo").html(dataJD.ordersmap.orderNo);
						$("#time").html(dataJD.ordersmap.orderTime);
						$("#name").text(dataJD.ordersmap.memberName);
						$("#telphone").text(dataJD.ordersmap.memberMobile);
						$("#serName").text(dataJD.ordersmap.serviceItemCode_NAME);
						$("#serTime").text(dataJD.customermap.SERVICE_START+"至"+dataJD.customermap.SERVICE_END);
						if(dataJD.customermap.PET_RAISING==0){
							$("#animal").text("无");
						}else{
							$("#animal").text("有");
						}	
						$("#salary").text(dataJD.servicePrice);
						$("#age").text(dataJD.customermap.WAGE_REQUIREMENTS);
						$("#address").text(dataJD.customermap.SERVICE_PROVICE_NAME+dataJD.customermap.SERVICE_CITY_NAME+dataJD.customermap.SERVICE_COUNTY_NAME+dataJD.customermap.SERVICE_ADDRESS);
						$("#remark").text(dataJD.customermap.REMARKS);
						$("#serType").text(dataJD.customermap.SERVICE_TYPE_NAME);
						var html2="";
						if(typeof(dataJD.customermap.SALARY_SKILLS)!="undefined"){
							for(var i=0;i<dataJD.customermap.SALARY_SKILLS_NAME.split(",").length;i++){
								html2+="<li>"+dataJD.customermap.SALARY_SKILLS_NAME.split(",")[i]+"</li>";
							}
						}				
						$("#content").html(html2);
						
					var	html="<div class='gold_list_l left'>"+
						"<img src='"+dataJD.staffmap.HEAD_IMAGE+"'/>"+
						"</div>"+
						"<div class='gold_list_r left'>"+
						"<h1 class='right_top' data-staffId='"+dataJD.ordersmap.staffId+"'>"+dataJD.staffmap.STAFF_NAME+
						"<span class='service'>"+dataJD.staffmap.WORK_STATUS_NAME+
						"</span>"+
						"<span class='per_info'>"+dataJD.staffmap.AGE+"岁/属"+dataJD.staffmap.ZODIAC_NAME+"/"+dataJD.staffmap.NATIVE_PLACE_NAME+"人"+
						"</span>"+
						"</h1>"+
						"<p data-serCode='"+dataJD.ordersmap.serviceItemCode+"'>"+dataJD.ordersmap.serviceItemCode_NAME+"</p>"+
						"<ul class='per_info_list'>"+
						"<li>"+dataJD.staffmap.EDUCARION_NAME+"学历"+"</li>"+
						"<li>"+dataJD.staffmap.CONSTELLATION_NAME+"</li>"+
						"<li>"+"从业"+dataJD.itemsmap.EXPERIENCE_NAME.split(",")[1]+"年"+"</li>"+
						"</ul>"+
						"<ul class='per_ab_list'>"+
						"</ul>"+
						"</div>";	
						$(".card").html(html);
						var html1="";
						for(var i=0;i<dataJD.itemsmap.SKILLS_NAME.split(",").length;i++){
							html1+="<li>"+dataJD.itemsmap.SKILLS_NAME.split(",")[i]+"</li>";
						}
						$(".per_ab_list").html(html1);
					}	
					}
					else {
					console.log(data.msg)
				}
				},
			error: function(err) {
				console.log(err);
			}
		});
		}
})	           
	//阿姨详情弹窗
	$(".card").click(function(){
		var staffId=$(".right_top").attr("data-staffId");
		var serviceItemCode=$(".gold_list_r P").attr("data-serCode");
		if(typeof(staffId)=="undefined"||staffId==null){
			return;
		}
		$.ajax({
				url: publicPath+"/api/houseKeeping/StaffPersonInfo",
				type: "post",
				data: {
					staffId:staffId,
					tenantId:"1"
				},
				dataType: "json",
				
				success: function success(data) {
					if(data.success) {
						if(data.code==0){
							var dataJD=data.jsonData;
							var html=
							"<div class='basic_l left'>"+"<img src='"+dataJD.headImage+"'/>"+
							"</div>"+
							"<div class='basic_r left'>"+
							"<h2>"+dataJD.staffName+"</h2>"+
							"<h3>"+"<span id='serviceName'>"+"</span>"+dataJD.age+"/属"+dataJD.zodiac+"/"+dataJD.nativePlace+"人"+
							"</h3>"+
							"<p>"+"<a id='work'>"+"</a>"+
							"<span>"+"|"+"</span>"+dataJD.educarion+"学历"+
							"<span>"+"|"+"</span>"+dataJD.constellation+
							"</p>"+
							"</div>";							
							$(".basic").html(html);
						}
					} else {
						console.log(data.msg);
					}
				},
				error: function(err) {
					console.log(err);
				}
			});
			$.ajax({
				url: publicPath+"/api/houseKeeping/StaffServiceInfo",
				type: "post",
				data: {
					staffId:staffId,
					serviceItemCode:serviceItemCode,
					tenantId:"1"
				},
				dataType: "json",
				success: function success(data) {
					if(data.success) {
						if(data.code==0){
							var dataJD=data.jsonData;
							var html1="";
							var html2="";
							var html3="";
							var html4="";
							for(var i=0;i<dataJD.skills.split(",").length;i++){
								html1+="<li>"+dataJD.skills.split(",")[i]+"</li>"
							}
							$("#skills").html(html1);
							for(var i=0;i<dataJD.cookingFeature.split(",").length;i++){
								html2+="<li>"+dataJD.cookingFeature.split(",")[i]+"</li>"
							}
							$("#cooking").html(html2);
							for(var i=0;i<dataJD.languageFeature.split(",").length;i++){
								html3+="<li>"+dataJD.languageFeature.split(",")[i]+"</li>"
							}
							$("#language").html(html3);
							for(var i=0;i<dataJD.characterFeature.split(",").length;i++){
								html4+="<li>"+dataJD.characterFeature.split(",")[i]+"</li>"
							}
							$("#character").html(html4);
							$("#work").html("从业"+dataJD.experience.split(",")[1]+"年");
							$("#workExperience").html(dataJD.workExperience);
							$("#myself").html(dataJD.selfEvaluation);
							$("#teacher").html(dataJD.teacherEvaluation);
							$(".fuwu_p").html(dataJD.serviceNature);
							$("#serviceName").html(dataJD.serviceItemName);
							
						
						}
					} else {
						console.log(data.msg);
					}
				},
				error: function(err) {
					console.log(err);
				}
			});
			$.ajax({
				url: publicPath+"/api/houseKeeping/StaffCertType",
				type: "post",
				data: {staffId:staffId,tenantId:"1"},
				dataType: "json",
				success: function success(data) {
					if(data.success) {
						if(data.code==0){
							var dataJD=data.jsonData;
						   var html="";
							$.each(dataJD, function(i,item) {
								html+="<li>"+dataJD.certType
								"</li>"
							});
							$(".paper").html(html);
						}
					} else {
						console.log(data.msg);
					}
				},
				error: function(err) {
					console.log(err);
				}
			});
		$(".mask0,.card_detail").show();
	});
</script>
</html>
